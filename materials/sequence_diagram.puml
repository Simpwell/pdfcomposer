@startuml

actor User
participant PDFDropZone
participant "Feature Component" as Feature
participant usePDFUpload
participant "PDF Library" as PDFLib

== ファイルアップロードフロー ==
User -> PDFDropZone: ファイルをドロップ
activate PDFDropZone
PDFDropZone -> usePDFUpload: handleFileUpload()
activate usePDFUpload
usePDFUpload -> PDFLib: ファイル読み込み
PDFLib --> usePDFUpload: PDFDocument
usePDFUpload --> PDFDropZone: 完了
deactivate usePDFUpload
PDFDropZone --> User: プレビュー表示
deactivate PDFDropZone

== PDF操作フロー ==
User -> Feature: 操作実行
activate Feature
Feature -> PDFLib: PDF操作
PDFLib --> Feature: 新しいPDF
Feature -> User: ダウンロード開始
deactivate Feature

== テキスト抽出フロー ==
User -> Feature: テキスト抽出開始
activate Feature
Feature -> PDFLib: テキストレイヤー確認
alt テキストレイヤーあり
    PDFLib --> Feature: テキスト抽出
else テキストレイヤーなし
    Feature -> "Tesseract.js": OCR実行
    "Tesseract.js" --> Feature: テキスト認識結果
end
Feature -> User: テキスト表示
deactivate Feature

@enduml 